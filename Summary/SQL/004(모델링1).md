# 데이터모델링

1. DB를 구축/설계하는 단계
2. 어떠한 정보시스템을 구축할 때 내부에 필요한 데이터를 설계하는 과정(DB에 테이블을 설계하는 과정)
3. 주어진 개념(사용자의 요구사항)으로부터 논리적인 데이터 모델을 구성하는 작업
    - 데이터베이스의 골격을 이해하고. 그 이해를 바탕으로 모델의 기능과 성능적인 측면에서 효율적인 작성이 필요함
    - 물리적인 데이터베이스 모델로 환원하여 고객의 요구에 따라 특정 정보시스템의 데이터베이스에 반영하는 작업도 포함
4. 데이터베이스 설계에서 첫번째 단계에 해당함
5. 정보시스템 구축의 대상이 되는 업무 내용을 분석하여 이해하고 약속된 표기법에 의해 표현하는걸 의미함
6. 데이터 모델링의 특징
    - 추상화 : 현실세계를 일정한 형식에 맞춰 간략하게 표현해야 함
    - 단순화 : 누구나 쉽게 이해할 수 있도록 제한된 표기법이나 언어를 사용해야 함
    - 명확화 : 명확하게 의미가 해석되어야 하고, 한 가지 의미만을 가져야 함

## 모델링의 목적

1. 업무정보를 구성하는 기초가 되는 정보들을 일정한 표기법(ex.ERD,Table 등)에 의해 표현함으로써 정보시스템 구축의 대상이 되는 업무 내용을 정확하게 분석하는 것
2. 분석된 모델을 가지고 실제 데이터베이스를 생성하여 개발 및 데이터관리에 사용하기위한 것

## 모델링의 중요성

1. 해당 업무 내용을 분석하고 이해하는 데도 유용하게 사용됨
2. 데이터베이스 사용자들 간에 의사소통을 쉽게 해줌
3. 전체적인 조화와 균형을 유지할 수 있게 해줌
4. 일관성은 있는지 등을 쉽게 파악할 수 있게 해줌
5. 가장 중요한 것은 요구사항분석임
6. 만일 데이터베이스설계가 제대로 되어있지 않은 상태에서 시스템이 구현된다면 사소한 문제로 인해 데이터베이스를 수정할 때 어렵게 해결해야하는 문제점 발생

## 모델링의 순서

1. 업무사항 분석(요구사항 수집 및 분석)
    - 업무 파악은 어떠한 업무를 시작하기 전에 해당하는 업무에 대해서 파악하는 단계
    - 고객과의 의사소통을 통해 고객의 업무 프로세스를 완벽하게 이해하고, 그들의 요구사항을 구체적으로 뽑아내는 과정임
2. 개념적 데이터 모델
3. 논리적 데이터 모델
4. 물리적 데이터 모델
5. 구현

## 모델링의 종류

1. 모델링의 종류
    - 개념적 데이터모델(요구사항, ex. ERD)
    - 논리적 데이터모델(ex. Table)
    - 물리적 데이터모델
2. 순서는 개념적 -> 논리적 -> 물리적으로 진행됨(개논물로 암기)

### 요구사항 수집 및 분석

1. 기능적 요구사항
    - 전제조건 : 보안, 성능에 초점
    - 시스템이 무엇을 하는지, 어떤 기능을 하는지 등 기능의 수행과 관련된 요구사항
    - 시스템의 입력과 출력으로 무엇이 포함되어야하는지에 대한 사항
    - 시스템이 어떤 데이터를 저장하거나 연산을  수행해야하는지에 대한 사항
    - 시스템이 반드시 수행해야하는 기능
    - 사용자가 시스템을 통해 제공받기를 원하는 기능
    - 기능적 요구사항의 예 : 데이터베이스에 조금 더 치중한 내용이며, 행위에 초점을 두고있음
    ![024_FC](https://github.com/user-attachments/assets/0a7901c9-b024-4a59-9eca-982af5e2c7eb)
2. 비기능적 요구사항
    - 품질이나 제약사항과 관련된 요구사항
    - 시스템 장비구성 요구사항
    - 성능 요구사항
    - 인터페이스 요구사항
    - 데이터를 구축하기위해 필요한 요구사항
    - 테스트, 보안을 위한 요구사항
    - 품질 요구사항 : 가용성, 정합성, 상호 호환성, 대응성, 이식성, 확장성, 보안성 등
    - 프로젝트 관리/자원 요구사항
    - 참고
    ![025_FC](https://github.com/user-attachments/assets/ced047cf-69cb-474f-8e98-81729544a51c)
    
3. 예시
    - 예시1
    ![019_EX](https://github.com/user-attachments/assets/cfe1266c-0cf3-4012-a3d7-055968f4ffaa)
    - 예시2
    ![020_EX](https://github.com/user-attachments/assets/bde586e0-20e7-4bd8-b135-4fb8b8b3e9d0)
    - 예시3
    ![021_EX](https://github.com/user-attachments/assets/04f218b6-27aa-4c01-870c-bbfcb02c49bc)
    - 예시4
    ![022_EX](https://github.com/user-attachments/assets/ef6cfa5b-dfd6-4200-aa46-f831b8d22f00)
    - 예시5
    ![023_EX](https://github.com/user-attachments/assets/0eaa7dfa-ad5f-47a9-b48a-9394271b5060)


4. 요구사항 분석을 마치면 요구사항 명세서를 작성하여 요구사항 내에 존재하는 개체와 속성추출

### 개념적 데이터모델

1. 고수준(인간에 맞춰짐)의 데이터모델(저수준:컴퓨터에 맞춰짐)
2. 전체 시스템에 대한 개념적인 정보를 나타내는 데에 사용됨
3. 시스템 구상단계에서 대략적인 스케치를 한다고 생각하면 좋음(추상적임)
4. 논리 모델을 만들기위한 기초작업이라고 볼 수 있음(논리적데이터모델링 전 작업)
5. 엔티티-관계(E-R)모델을 구성함
6. 소프트웨어설계가 있을 때 전반적인 요구사항이 들어오고, DB가 같이 만들어짐
7. 피터 첸 표기법(Peter Chen Notation)으로 ERD를 구성한 그림
8. 정리

|단계|설명|
|---|---|
|목적|-DBMS에 독립적인 개념적 스키마설계<br>-요구사항 분석결과물을 개념적데이터모델을 이용해 개념적구조(ERD)로 표현<br>-일반적으로 E-R모델(ERD)을 이용함|
|주요작업|요구사항분석결과를 기반으로 중요한 개체를 추출하고 개체 간의 관계를 결정하여 E-R다이어그램으로 표현함|
|작업과정|-개체추출, 각 개체의 주요속성과 키속성을 선별<br>-개체간의 관계설정<br>-E-R다이어그램으로 표현|
|결과물|E-R다이어그램|

#### E-R 모델(ERD)

1. 개념적데이터모델이며, 엔티티(개체), 애트리뷰트(속성), 관계를 이용해서 실세계를 개념적으로 표현함 -> Real World를 ERD((Entity-Relation Diagram))로 만듦
2. 구성요소
    - 엔티티(개체) : 모델의 관리대상, 실체가 있는 것이나 개념, DB의 테이블은 사각형으로 표시됨      
        - 실체/형태가 없어도 테이블로 만들 수 있다면 엔티티가 될 수 있음
        - 저장할 만한 가치가 있는 주요데이터를 가졌다면 개체가 될 수 있음
    - 애트리뷰트(속성) : 엔티티의 구성요소, 타원으로 표시됨
    - 관계 : 
        - 엔티티간의 관계(ex.1:1,1:N,N:M), 관계형DB로 매핑(사상), 마름모로 표시됨(특정행위중심, ex. '수강생'이 이'강의'를 듣는다.)
        - 개체간의 의미있는 연관성이라고 볼 수 있음
        - 관계추출방법
        ![026_FC](https://github.com/user-attachments/assets/b31fbcca-e686-47bf-bdd5-87ef50a555c2)
        

    ![001_ER](https://github.com/user-attachments/assets/7eb86109-c0f9-4fab-9d0b-5f017306a43d)


3. 엔티티
    - 실제로 존재하는 대상(개념도 포함)
    - ER모델에서 가장 기본이 되며, 고율하게 식별(KEY가 있어야함)이 되어야 함
    - 엔티티의 예시
        - 사람 : 학생, 교수, 사원 등
        - 장소 : 학교, 강의실 등
        - 사물 : 교과서, 생산제품 등
        - 사건 : 강의, 면담 등
        - 개념 : 강좌, 과목, 프로젝트 등
4. 엔티티타입
    - 엔티티가 모여서 하나의 집단을 이룬 형태
    - ER다이어그램에서 엔티티 타입은 사각형으로 표현
    - 그냥 엔티티라고 생각해도 됨
    - 분류
        - 강한 엔티티타입 : 보통의 엔티티타입(ex.비행기)
        - 약한 엔티티타입 : 자신의 키(기본키)애트리뷰트가 없는 엔티티 타입으로, 다른 엔티티에 종속되어서 해당 엔티티가 없다면 존재하지 않은 종속성을 가짐(ex.비행기좌석)
    - 식별관계와 비식별(일반적)관계 : 약한 엔티티타입과 강한(일반)엔티티타입이 관계가 맺어질 때는 "식별관계"가 됨
5. 애트리뷰트
    - 엔티티 또는 관계가 갖는 성질이나 특성
    - 엔티티는 반드시 하나 이상의 키 애트리뷰트를 가지고 있어서 나머지 애트리뷰트를 유일하게 정의할 수 있음
    - 쉽게 말하자면, 보통의 엔티티들은 자신의 키(기본키)애트리뷰트를 가지고있다는 뜻임
    - 애트리뷰트의 분류

    |애트리뷰트이름|특징|작성방법|
    |---|---|---|
    |단순애트리뷰트|보통의 애트리뷰트|속성끼리 한줄로만 연결됨|
    |키애트리뷰트|-엔티티들을 식별할 수 있는 유일한 제약조건을 갖는 애트리뷰트<br>-보통 ER다이어그램에서는 기본키나 후보키를 키애트리뷰트라고하며, 모두 밑줄을 그어서 표시함|해당 애트리뷰트에 밑줄|
    |복합애트리뷰트|-두개이상의 애트리뷰트<br>-쉽게 말하자면 애트리뷰트가 또 다른 애트리뷰트로 나눠지는 것|하나의 애트리뷰트에서 가지처럼 여러개의 애트리뷰트로 뻗어나가는형태|
    |다치애트리뷰트|-애트리뷰트 하나에 여러 값이 들어갈 수 있는 애트리뷰트<br>-예를 들면 강사엔티티의 보유기술에 애트리뷰트는 강사가 보유한 다양한 기술이 들어갈 수 있음|두개의 실선으로 타원(◎)을 그리는 형태로 표시됨|
    |유도된 애트리뷰트|-실제 값이 저장되어있는 것이 아니라 저장된 값에서 계산해 얻은 값을 사용하는 애트리뷰트<br>-예시로 나이는 실제 나이를 저장하지않고, 생년월일(저장된값)과 오늘 날짜로부터 계산해서 얻음|점선으로 그려진 타원형의 형태|
    |부분키 애트리뷰트|키애트리뷰트와 비슷하지만 약한엔티티에서만 사용가능함<br>-예시 : 영화좌석이 J6인건 알지만, 어떤 몇관인지 알지못하면 모든 관의 J6를 확인해야 함<br>-보통 잘 사용되지 않음|점선으로 해당 엔티티에 밑줄을 그어서 표현|
6. IE(Information Engineering notation)기법

|관계|표시방법|
|---|---|
|식별관계|실선표시|
|비식별관계|점선표시|

7. 문제풀이
- Q.식별자와 비식별자 관계에 대한 설명으로 부적절한 것은?
- A1 : 식별자 관계는 강한관계, 비식별자 관계는 약한 관계를 가짐
- A2 : 식별자 관계는 상속받은 주식별자 속성을 타엔티티에 이전이 필요하고, 비식별자 관계는 차단이 필요함
- A3 : 식별자 관계는 실선으로, 비식별자 관계는 점선으로 표시함
- A4 : 식별자 관계는 자식 엔티티의 기본키가 부모 엔티티에 대해 독립적으로 구성되고, 비식별자 관계에서는 종속적으로 구성됨
- 정답 : A4 -> 식별자관계와 비식별자관계의 내용을 반대로 표기해야함
    - 종속적이다, 부모자식 = 식별관계, 독립적이다, 일반적인 관계 = 비식별관계로 볼 수 있음
8. 관계
    - 엔티티 타입 간의 관계를 표현할때 사용되며, 엔티티간에 존재하는 수학적인 관계를 말함
    - ER다이어그램에서 마름모를 사용하여 표현하며, 1:1/1:N/N:M의 관계가 있음
9. 식별관계
    - 약한 엔티티를 식별할 때 사용하는 관계타입
    - 강한 엔티티와 약한 엔티티의 연결고리
    - 아래 그림에서 보이는 약한관계가 식별관계임

#### ERD_카디널리티 비율

1. 카디널리티 비율
    - 두 엔티티 사이의 관계에서 참여자의 수를 표현하는 것을 카디널리티 비율이라고 함
    - 비율의 종류는 1:1/1:N/N:M의 관계가 있음

    |관계|예시|
    |---|---|
    |1:1|강좌 : 수강생|
    |1:N|강사 : 수강생들|
    |N:M|수강생들 : 빈자리의 컴퓨터들|

    - IE 기준
    ![002_ER](https://github.com/user-attachments/assets/b30948b8-7375-4b27-8a88-3962dc072e8a)
<table border="1">
    <tr>
        <td>참여형식</td>
        <td>특징</td>
    </tr>
    <tr>
        <td>필수참여</td>
        <td>-실선의 형태<br>-테이블끼리 관계를 맺을 때, 적어도 한 개의 관계에는 필수적으로 참여해야 함(이어져있는 선은 최소 하아여야 함)</td>
    </tr>
    <tr>
        <td>선택참여</td>
        <td>-○형태<br>-선택참여가 붙으면 있어도 되고, 없어도 됨</td>
    </tr>
    <tr>
        <td>다중참여</td>
        <td>< 형태</td>
    </tr>

</table>

2. 문제풀이1
![003_QZ](https://github.com/user-attachments/assets/639ab8fc-e248-458b-9255-4877d356ea8d)

3. 문제풀이2
![004_QZ](https://github.com/user-attachments/assets/496e6ad0-311e-4f4b-851e-7155b91e81da)

4. ER모델에서 전체참여와 부분참여

![006_ER](https://github.com/user-attachments/assets/72886e48-2a9a-4dc3-9bd6-71bb892662e5)
- 모든 부서마다 반드시 1명의 관리자가 있어야 하기 때문에, 부서(department) 엔티티는 관리(manage) 관계에 전체 참여 -> 두 줄 표시
- 반면, 일부 사원들만 부서의 관리자가 될 수 있기 때문에, 직원(employee) 엔티티는 관리(manage)관계에 부분 참여 -> 한 줄 표시


5. ERD 다이어그램 예시

![005_ER](https://github.com/user-attachments/assets/bae01925-a0d6-444c-bd4a-50e309d8dffc)

6. 다이어그램 그려보기

- 고객을 관리하기 위해 고객번호, 고객이름, 주소, 직업, 나이를 저장함
- 계좌를 관리하기 위해 계좌번호, 유형, 잔액을 저장함
- 고객 한 명이 여러 계좌를 소유할 수 있음
- 계좌 하나는 한 명의 고객만 소유할 수 있음

![007_ER](https://github.com/user-attachments/assets/40e21a15-73a5-48c0-88b3-34de01b155a7)

7. 문제풀이3

- Q. 하나의 릴레이션에서 튜플의 전체 개수를 릴레이션의 ( )라고 한다. ( )안에 올바른 것은?
- 예시 : 도메인	테이블 중값속성 카디널리티
- A. 카디널리티