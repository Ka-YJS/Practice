# 데이터모델링

## 모델링의 종류

### 논리적 데이터모델

1. 개념적인 데이터 모델이 완성되면, 구체화된 업무 중심의 데이터 모델을 만들어 내야함
2. 업무에 대한 Key, 속성, 관계등을 표시하며, "정규화" 활동을 수행함
3. 정규화는 데이터 모델의 일관성을 확보하고 중복을 제거하여 신뢰성있는 데이터 구조를 얻는데 목적이 있음
4. 표현데이터모델 또는 구현 데이터모델로도 불리며, 구축할 시스템의 이미지를 만듦
5. 종류 : 관계형 데이터모델, 계층형 데이터모델, 네트워크형 데이터모델, 객체지향형 데이터모델
6. 정리

|단계|설명|
|---|---|
|목적|-DBMS에 적합한 논리적 스키마 설계<br>-개념적 스키마를  논리적데이터모델을 이용해 논리적으로 표현함<br>-일반적으로 관계데이터모델을 많이 이요함|
|주요 작업|-ERD(개념적설계의 결과물)를 릴레이션 스키마로 변환<br>-변환 후 속성의 데이터타입, 길이, NULL값 허용여부, 기본값(DEFAULT), 제약조건 등을 세부적으로 결정하고 결과를 문서화(도메인포함해서 문서화 -> 테이블명세서)|
|결과물|논리적 스키마 : 릴레이션 스키마|

7. ERD를 릴레이션스키마로 변환하는 규칙
    - 규칙1 : 모든개체는 릴레이션으로  변환
    - 규칙2 : N:M관계는 릴레이션으로 변환
    - 규칙3 : 1:N관계는 외래키로 표현
    - 규칙4 : 1:1관계는 외래키로 표현???????????
    - 규칙5 : 다중 값 속성은 릴레이션으로 변환
    - 변환 규칙을 순서대로 적용하되, 해당되지않는 규칙은 제외

#### 논리적 데이터모델 규칙

1. 규칙1 : ERD각 개체를 하나의 릴레이션으로 변환
    - 개체의 이름 -> 릴레이션의 이름
    - 개체의 속성 -> 릴레이션의 속성
    - 개체의 키속성 -> 릴레이션의 기본키
    - 개체의 속성이 복합속성이 경우에는 복합속성을 구성하고있는 단순 속성만 릴레이션의 속성으로 변환
2. 규칙2 : 다대다관계를 하나의 릴레이션으로 변환
    - 관계의 이름 -> 릴레이션의 이름
    - 관계의 속성 -> 릴레이션의 속성
    - 관계에 참여하는 개체를 규칙1에 따라 릴레이션으로 변환 후 이 릴레이션의 기본키를 관계릴레이션에 포함시켜 외래키를 지정하고, 외래키들을 조합하여 관계릴레이션의 기본키로 설정
3. 규칙3 : ERD의 일대다관계는 외래키로만 표현
    - 약한개체는 강한개체에 따라 존재여부가 결정되므로 강한 개체의 기본키를 이용해 식별
    - 1측의 PK를 외래키에 줌
- 규칙3-1 : 일반적인 일대다관계는 외래키로 표현
    - 일대다관계에서 1측 개체 릴레이션의 기본키를 N측 개체릴레이션에 포함시켜 외래키로 지정
    - 관계의 속성들도 N측 개체 릴레이션에 포함시킴
- 규칙3-2 : 약한개체가 참여하는 일대다관계는 외래키를 포함해서 기본키로 지정(식별관계일 때)
    - 일대다관계에서 1측 개체 릴레이션의 기본키를 N측 개체릴레이션에 포함시켜 외래키로 지정
    - 관계의 속성들도 N측개체릴레이션에 포함시킴
    - N측 개체릴레이션은 외래키를 포함하여 기본키를 지정
4. ERD의 일대일 관계는 외래키로만 표현
- 규칙4-1 : 일반적인 일대일 관계는 외래키를 서로 주고 받음(선택참여,선택참여)
    - 관계에 참여하는 개체 릴레이션들이 서로의 기본키를 주고 받아 외래키로 지정
    - 관계의 속성들도 모든 개체 릴레이션에 포함시킴
    - 불필요한 데이터 중복이 발생할 수 있음
- 규칙4-2 : 일대일 관계에 필수적으로 참여하는 개체의 릴레이션만 외래키를 받음(필수참여,선택참여)
    - 관계에 필수적으로 참여하는 개체 릴레이션만 외래키를 포함시킴
    - 관계의 속성들은 관계에 필수적으로 참여하는 개체 릴레이션에 포함시킴
- 규칙4-3 : 모든 개체가 일대일 관계에 필수적으로 참여하면 릴레이션 하나로 합침(필수참여,필수참여)
    - 관계에 참여하는 관계 릴레이션들을 하나의 릴레이션으로 합쳐서 표현
    - 관계의 이름을 릴레이션 이름으로 사용하고, 관계에 참여하는 두 개체의 속성들을 관계 릴레이션에 모두 포함시킴
    - 두 개체 릴레이션의 키 속성을 조합하여 관계 릴레이션의 기본키로 지정
5.  ERD의 다중 값 속성은 독립적인 릴레이션으로 변환(다중 값 속성 -> 릴레이션)
    - 다중 값 속성과 함께 그 속성을 가지고 있던 개체 릴레이션의 기본키를 외래키로 가져와 새로운 릴레이션에 포함시킴
    - 새로운 릴레이션의 기본 키는 다중 값 속성과 외래키를 조합하여 지정
6. 테이블명세서 작성(도메인 포함->필수)
    - 릴레이션 스키마에 대한 설계 정보를 기술한 문서
    - 릴레이션 스키마 변환 후 속성의 데이터 타입과 길이, 널 값 허용 여부 등을 세부적으로 결정하고 문서화
7. 물리적 설계(물리적 구조설계)
    - 하드웨어나 운영체제의 특성을 고려하여 필요한 인덱스 구조나 내부 저장 구조 등에 대한
    물리적인 구조를 설계
    - 그 후에 구현함

    


#### 관계형 데이터모델

1. 테이블 형태로 나타내는 데이터 모델
2. 간단하여 이해하기가 쉬우며, 데이터저장의 위치와 접근방법을 DBMS가 결정하기때문에 사용자는 필요한 데이터만 명시하면 됨

#### 계층형 데이터모델

1. 계층형에서 데이터는 레코드와 링크로 구성된 트리형태로 나타남
2. 링크로 연결된 레코드의 집합은 부모-자식관계를 표현함

#### 객체지향형 데이터모델

1. 데이터와 메소드를 하나의 객체로 다루기때문에 이해하기쉽고, 유지와 변경이 용이함
2. 객체지향 프로그래밍의 패러다임을 기반으로 함

#### 논리적 데이터모델들의 장단점비교

<table border="1">
    <tr>
        <td>모델종류<td>
        <td>장점<td>
        <td>단점<td>
    </tr>
    <tr>
        <td>관계형데이터모델<td>
        <td>-유지보수가 쉬움<br>-사용자의 편의성<br>-업무에 대한 적응력 우수<td>
        <td>-메모리 용량이 많이 필요<br>-다대다(N:M)관계의 표현이 어려움<br>-정ㅂ도 추출에 많은 시간이 필요<td>
    </tr>
    <tr>
        <td>계층형데이터모델<td>
        <td>-일대다(1:N)관계의 표현이 쉬움<br>-데이터처리가 빠름<td>
        <td>-숙련된 전산요원필요<br>-다대다(N:M)관계의 표현이 어려움<br>-업무변화에 대한 적응력이 부족함<td>
    </tr>
    <tr>
        <td>네트워크형데이터모델<td>
        <td>-다대다(N:M)관계의 표현이 쉬움<br>-데이터 접근이 쉬움<td>
        <td>-데이터의 종속성<br>-운용이 불편함<td>
    </tr>
    <tr>
        <td>객체지향형네트워크모델<td>
        <td>-재사용성이 쉬움<br>-유지보수가 쉬움<br>-업무변화에 대한 적응력이 우수함<td>
        <td>-개념이 미정립됨<br>-설계가 어려움<td>
    </tr>
</table>


### 물리적 데이터 모델

1. 최종적으로 데이터를 관리할 데이터 베이스를 선택하고, 선택한 데이터 베이스에 실제 테이블을 만드는 작업을 말함(컴퓨터내부에서 실제로 데이터들이 어떻게 저장되는가를 표현함)
2. 시각적인 구조를 만들었으면 그것을 실제로 SQL 코딩을 통해 완성하는 단계라고 보면 됨
3. 레코드가 실제로 저장되는 형식, 특정레코드를 효율적으로 탐색하는 구조인 접근경로 등을 기술함(=DBMS)
4. 우리가 하는 데이터베이스제작작업(SQL)이 이부분에 해당함


### 데이터모델링 하는 방법

1. 개념적 데이터모델

![008_MD](https://github.com/user-attachments/assets/45328d4d-734c-4639-bb52-7456be658054)
- 조합키 : 두개 이상의 컬럼이 하나의 기본키로 작동하기 때문에 두개가 완전히 일치하는 데이터가 올 수 없음
<br>-> 동시에 나열형식으로는 사용할 수 없지만, PK이름을 설정하고 그 안에 (칼럼1,칼럼2) 형식으로 표현 가능

2. 논리적 데이터모델

![009_MD](https://github.com/user-attachments/assets/c6acea19-2209-481c-8c4a-36f24f41fb10)

3. 물리적 데이터모델

![010_MD](https://github.com/user-attachments/assets/760c45f5-6130-4b9b-a3a1-68b72e7f9aa6)