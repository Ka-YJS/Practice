# 관계형 데이터베이스(RDBMS)

1. 데이터가 하나이상의 열과 행의 테이블에 저장됨
2. 서로 다른 데이터구조가 어떻게 관련되어 있는지 쉽게 파악하고 이해할 수 있도록 사전정의된 관계로 데이터가 구성됨
3. 관계 : 테이블간의 상호작용(테이블의 삽입/수정/삭제)을 기반으로 설정되는 여러테이블간의 논리적 연결

## 분산 데이터베이스

1. 중앙집중형 데이터베이스
2. 물리적으로 여러 대의 서버가 존재하고, 네트워크로 하나로 연결된 구조임
3. 단일 데이터베이스처럼 보여주고, 분산된 작업처리를 함
4. 투명성이 제공됨
5. 분산 데이터베이스환경
    - 위치투명성 : 고객은 사용하려는 데이터의 저장장소를 몰라도 됨
    - 중복투명성 : 데이터베이스가 여러시스템에 중복되어 존재하더라고 일관성은 유지됨
    - 장애투명성 : 분산된 데이터베이스에 장애가 발생해도 데이터 무결성은 보장됨
    - 병행투명성 : 여러사용자가 동시에 트랜잭션을 수행해도 결과에 이상이 없음


## SQL용어

### 테이블(릴레이션)

1. 표(테이블)을 릴레이션이라고 함
2. 일반적인 데이터베이스에서는 행과 열만 있으면 테이블이라고 하지만, 관계형데이터베이스에서는 특별한 제약을 추가해서 릴레이션(relation)이라고 부름
3. DB에서 정보를 구분하여 저장하는 기본단위
4. 동일한DB 내에서는 같은 이름을 가진 릴레이션이 존재할 수 없음
    - DB라는 공간 안에 여러개의 테이블(릴레이션)이 존재함
    - 각 테이블당 이름이 있고, 동일한 이름은 사용할 수 없음
    - ex. DB = 나라, TABLE = 주민등록번호
5. 행과 열로 이루어진 데이터의 집합을 테이블이라고 하며, 엑셀을 켜고 보는 모양과 매우 흡사함 

### 행(Row, Tuple)

1. 한마디로 릴레이션에 실제적으로 들어있는 값(데이터)으로, 가로로 묶은 데이터셋을 말함
2. RDBMS에서 릴레이션의 각 행을 튜플이라고하며, 레코드 혹은 데이터라고도 함
3. 한 릴레이션에 포함된 튜플의 개수는 계속 변함
4. 일반적으로 한명에 대한 정보를 가지고 있음
5. 행의 기수(Cadinality)
    - 릴레이션의 튜플의 개수로 카디널리티는 0이 될 수 있음
    - 표가 아래와 같을 때, 카디널리티의 개수는 4개라고 볼 수 있음

    |사원번호|이름|전화번호|부서|
    |---|---|---|---|
    |2013100100|이아람|010123456667|1|
    |2013100101|노은경|01099992222|2|
    |2013100102|이은재|01011113333|4|
    |2013100103|유우리|01044445555|1|

### 열(Column, Attributes)

1. 테이블을 구성하는 데이터들 중 세로로 묶은 데이터넷을 의미하며, 일반적으로 열은 그 테이블의 속성을 의미함
2. 테이블(릴레이션)의 속성하나의 열은 하나의 속성 정보를 표시함
3. 이 또한 RDBMS에서 속성(attribute)라는 이름으로 불림
4. 컬럼은 특정데이터의 정보를 설명해줌(ex. 사원번호, 이름, 전화번호 등의 구조를 말함)
5. 열을 구성하는 값들은 같은 도메인(domain)으로 되어있음
6. 열의 차수(Degree) : 한 릴레이션에 들어있는 에트리뷰트의 수(열의 개수)


### 도메인(Domain)

1. 도메인은 제약조건으로, 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값들의 집합이라고 볼 수 있음(하나의 속성이 취할 수 있는 동일한 유형의 데이터 집합을 의미함)
2. 예를들어 성별을 저장하기로 했으면 남,여에 대한 데이터만 들어올 수 있음
(여기서 남과 여는 도메인이고 그 외의 것은 저장하지않음)
3. 데이터를 넣을 때 넣을 데이터의 조건
    - 삽입되는 튜플을 의도한 값만 사용하는 것
    - 예를들어, 강사에 대한 데이터를 만들 때 필요한 정보는 아래와 같음

    |도메인|내용|데이터타입|
    |---|---|---|
    |1|이름|문자|
    |2|강사번호|숫자|
    |3|전화번호|숫자|

4. 문제풀이
- Q. 성별이라는 칼럼은 M 혹은 F값만 가질 수 있다. 성별이라는 칼럼의 제약조건은 무엇인가?
- A. 도메인


### 스키마

#### 스키마란?

1. 스키마는 데이터베이스의 구조와 제약 조건에 관한 전반적인 명세를 기술한 메타데이터의 집합임
2. 스키마는 데이터베이스를 구성하는 데이터 개체(Entity), 속성(Attribute), 관계(Relationship) 및 데이터 조작 시 데이터 값들이 갖는 제약 조건 등에 관해 전반적으로 정의함
3. 스키마는 DB의구조(속성)과 제약조건(도메인)이라고 볼 수 있음 -> DB구성 시 데이터가 갖는 값의 제약조건
4. 스키마는 사용자의 관점에 따라 외부 스키마, 개념 스키마, 내부 스키마로 나눠짐

#### 스키마의 특징

1. 스키마는 데이터 사전(Data Dictionary)에 저장되며, 다른 이름으로 메타데이터라고도 함
2. 스키마는 현실 세계의 특정한 한 부분의 표현으로서 특정 데이터 모델을 이용해서 만들어짐
3. 스키마는 시간에 따라 불변인 특성을 가짐
4. 스키마는 데이터의 구조적 특성을 의미하며, 인스턴스에 의해 규정됨
5. 시스템카탈로그
    - 시스템정보 -> 메타데이터
    - 사용자가 조작할 수 없음
    - SELECT는 가능 -> 조회가능(But.삭제/수정 불가능)
    - DB가 데이터생성할 때 만들어짐

#### 데이터 독립성

1. 논리적 데이터 독립성
    - DB의 논리적 구조변경 -> 응용 프로그램에 영향X
    - 외부스키마와 개념스키마 사이에 논리적 데이터 독립성이 있음
2. 물리적 데이터 독립성
    - DB의 물리적 구조변경 -> 논리적 구조나 데이터의 내용에 영향X
    - 개념스키마와 내부스키마 사이에 물리적 데이터 독립성이 있음

#### 스키마의 종류

1. 개념스키마 : 전체적인 뷰(조직입장)
    - 조직체 전체를 관장하는 입장에서 DB를 정의한 것
    - 관계, 제약조건, 접근권한, 보안정책, 무결성 규칙에 관한 사항을 포함하고 있음
    - 따라서 개념스키마를 '스키마'라고 칭하기도 하며, DB전체를 기술한것이기 때문에 한 개밖에 존재할 수 없음
2. 내부스키마 : 하드웨어의 입장
    - 물리적인 저장장치 입장에서 DB가 저장되는 방법을 기술한 것
    - 구체적인 개념으로 스키마를 디스크 기억장치에 물리적으로 구현하기 위한 방법을 기술한 것
    - 데이터베이스의 물리적 저장구조를 정의
    - 디스크에 어떤 구조로 저장할 것인가
    - 데이터의 실제 저장방법을 기술
    - 물리적인 저장장치와 밀접한 계층
    - 시스템 프로그래머나 시스템 설계자가 보는 관점의 스키마
3. 외부스키마 : 사용자 뷰(사용자입장, 인터페이스)
    - 사용자나 응용 프로그래머가 개인의 입장에서 필요한 데이터베이스의 논리적 구조를 정의
    - 실세계에 존재하는 데이터들을 어떤 형식, 구조, 배치 화면을 통해 사용자에게 보여줄 것인가
    - 전체 데이터베이스의 한 논리적 부분 -> 서브 스키마
    - 하나의 데이터베이스에는 여러 개의 외부 스키마가 존재할 수 있음
    - 예를들어 '운전면허시험'에 대한 전반적인 정보를 얻고자 할 때, 누구는 '운전면허시험'이라고 검색하고, 누구는 '운전면허증', 누군가는 '운전면허필기시험'이라고 검색할 것임 -> 이것이 외부 스키마는 여러개 존재할 수 있다는 의미
    - 응용 프로그래머는 C, JAVA등의 언어를 이용해서 DB에 접근함

# SQL 자료형

## 자료형(데이터유형, 데이터타입)

    1. 데이터 타입이란 컬럼이 저장되는 데이터의 유형을 말하며, 오라클에서는 기본으로 제공되는 기본 데이터 타입이 있음
    2. 크게 나누면 숫자형, 문자형, 날짜형 이렇게 3가지가 있음
        - 숫자형 : TINYINT, INT, FLOAT
        - 문자형 : CHAR, VARCHAR, TEXT, ENUM
        - 날짜형 : DATE, DATETIME, TIMESTAMP

### 숫자형 데이터 타입

1. 대부분 NUMBER형을 사용함
2. 숫자타입은 4가지가 있긴 하지만 NUMBER형만 사용할 때가 많음
3. NUMBER(5)는 12345를 나타낼수 있음
4. NUMBER(5,2)는 123.45를 나타낼 수 있음
5. 다른 DBMS는 INTEGER와 같은 정수형, DECIMAL과 같은 실수형을 제공함
6. 오라클도 이런 타입으로 작성하는 것이 가능하지만 내부에서는 모두 NUMBER로 변환되어 생성됨
7. 숫자 데이터 타입 종류와 특징
    - INTEGER : INT와 표기법만 다르고 같음
    - DOUBLE : FLOAT보다 더 큰 범위를 가짐
    - DECIMAL : 위/경도데이터저장할때 사용되며, 내부적으로는 문자형태로 저장됨
    - NUMBER, FLOAT, BINARY_FLOAT, BINARY_DOUBLE, TINYINT, SMALLINT, MIDIUMINT, BIGINT 등이 있음

### 문자형 데이터 타입

1. 문자나 문자열 데이터는 문자형 데이터에 속함
2. 가변길이라 함은 실제 입력된 데이터 길이에 따라 크기가 변해 정해지는 것을 말함
3. 예를들어 VARCHAR2(10)으로 선언하면, 10byte까지 데이터를 입력할 수 있지만, 
'bac'라는 세글자만 들어왔을 때 실제 길이는 3byte가 됨
4. 공간효율적인 측면에서 VARCHAR2를 사용하는 것이 좋음
5. 영어는 글자당 1byte, 한글은 2byte임
6. 문자 데이터 타입 종류와 특징
    - CHAR(n)
        - CHAR(0)도 지원하며, CHAR(N)일땐 실제값이 N만큼 글자수보다 작으면 남는 자리수는 공백이 됨
        - 지정한 크기만큼 공백을 붙여 저장공간을 모두 사용(저장)
    - VARCHAR(n) : N에서 사용한 길이까지만 저장해서 남는자리는 사용하지않음, CHAR형보다 기억장치를 효율적으로 사용
    - ENUM : 입력한 문자형태의 값을 숫자로 저장, 잘 사용되지않음(정규화위반, 데이터수정이 어려움, 속성추가 및 연관정보 저장불가능, 조회가 어려움, 최적화효과가 없음, 다른 테이블에서 재사용 불가능)
    - NCHAR(n), NVARCHAR(n), TINYBLOB, TINYTEXT, BLOB, TEXT, MEDIUMBLOB, MEDIUMTEXT, LONGBLOB, LONGTEXT 등

### 날짜형 데이터 타입

1. DATE : BC 4712년 1월 1일부터 9999년 12월 31일, 연, 월, 일, 시, 분, 초 까지 입력 가능
2. TIMESTAMP : 연도, 월, 일, 시, 분, 초 + 밀리초까지 입력가능
3. 날짜형 데이터 타입 종류와 특징
    - DATE : '1001-01-01'~'9999-12-31' 혹은 'YYYY-MM-DD' 형식 반드시 준수
    - DATETIME : 날짜와 시간을 함께 저장, 위와같은 형식 준수
    - TIMESTAMP : 특정시점 이후로 초를 저장함
    - TIME : 'HH:MM:SS' 형식 준수
    - YEAR
        - 연도만 저장하는 자료형, YEAR(N)과 같은 형식
        - N은 2와 4를 저장할 수 있음
        
        |N에 대입된 숫자|범위|
        |---|---|
        |N이 2인경우|값의 범위 : 70~69|
        |N이 4인 경우|값의 범위 : 1970~2069|

### LOB데이터 타입

1. LOB은 'Large Object'의 약자로 대용량 데이터를 저장할 수 있는 데이터 타입임
2. LOB데이터 타입 종류와 특징
    - CLOB : 문자형 대용량 객체, 고정길이와 가변길이 문자 집합 지원
    - NCLOB : 유니코드(다국어)를 포함한 문자형 대용량 객체
    - BLOB : 이진형 대용량 객체
    - BFILE : 대용량 이진 파일에 대한 로케이터(위치,이름)저장