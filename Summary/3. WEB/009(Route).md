# Router

## 리액트 라우터

### 리액트 라우터의 개념

1. 리액트는 SPA(Single Page Application)로, 하나의 HTML 페이지에서 여러 컴포넌트를 교체하며 동작함
2. 그러나 여러 페이지를 가진 웹사이트처럼 URL에 따라 다른 화면을 보여주고 싶을 때가 있음
3. 사용자가 URL을 변경하거나 네비게이션을 할 때 페이지를 새로고침하지 않고도 URL에 맞는 컴포넌트를 렌더링할 수 있도록 해줌

### 리액트 라우터의 필요성

1. SPA의 특성 유지
    - 리액트 애플리케이션은 기본적으로 하나의 HTML 페이지에서 여러 컴포넌트를 전환하면서 동작함
    - 리액트 라우터를 사용하면 브라우저의 새로고침 없이도 URL을 변경하고 해당 URL에 맞는 컴포넌트를 렌더링할 수 있음
2. 페이지 전환 시 깜빡임 방지
    - 전통적인 멀티 페이지 애플리케이션에서는 사용자가 페이지를 이동할 때마다 전체 페이지를 다시 로드하게 되어 
    깜빡임 현상이 발생함
    - 리액트 라우터는 클라이언트 사이드 라우팅을 통해 페이지 전환 시 깜빡임 현상을 없애고, 보다 매끄럽고 빠른 사용자 경험을 제공함
3. 브라우저 히스토리 관리
    - 리액트 라우터는 브라우저의 히스토리 API를 사용하여 뒤로 가기, 앞으로 가기 등의 
    네비게이션 기능을 정상적으로 동작하게 함
    - 사용자가 페이지를 탐색할 때 히스토리가 관리되므로, 이전 페이지로 쉽게 돌아갈 수 있음
    <br>->히스토리 API(History API) : 
    - 브라우저에서 사용자의 탐색 기록(히스토리)을 조작하고 관리할 수 있는 기능을 제공하는 웹 API임
    - 이 API를 사용하면 JavaScript를 통해 브라우저의 주소(URL)를 변경하거나, 
    사용자의 브라우저 히스토리를 업데이트할 수 있음
4. 복잡한 애플리케이션 구조 관리
    - 대규모 애플리케이션에서는 여러 개의 페이지와 다양한 경로를 관리해야 함
    - 리액트 라우터는 이러한 복잡한 경로 구조를 컴포넌트 형태로 쉽게 관리할 수 있게 해줌

### 사용방법

1. Routes : 모든 Route를 그룹화하며, URL의 경로에 따라 적절한 Route를 렌더링함
2. Route : URL경로와 컴포넌트를 매핑하여, 특정 경로에 맞는 컴포넌트를 렌더링 함
3. Route 컴포넌트의 주요 속성(Props)
    - path
        1. URL 경로를 정의함
        2. 사용자가 특정 경로에 접근할 때 어떤 컴포넌트를 렌더링할지를 결정하는 데 사용됨
        3. 예시 :  path="/about"는 /about 경로에 접근할 때 렌더링할 컴포넌트를 지정함
    - element
        1. 경로와 일치할 때 렌더링할 컴포넌트를 지정함. 
        2. <Route\> 컴포넌트가 URL 경로와 일치할 경우, element로 지정된 컴포넌트를 렌더링함
        3. 예시 : element={<Home \/>}는 / 경로에 접근할 때 <Home\> 컴포넌트를 렌더링
    - Link : html에 <a\>태그와 비슷한 역할을 함


### 동적 라우트

1. 동적 라우트의 개념
    - 동적 라우트는 URL의 일부를 변수처럼 사용하여 다양한 경로를 처리할 수 있는 기능임
    - 이를 통해 하나의 라우트 설정으로 여러 유사한 경로를 처리할 수 있음
    - 예를 들어, 블로그 애플리케이션에서 각 게시글마다 고유한 ID나 슬러그를 사용하여  상세 페이지를 보여줄 때 동적 라우트를 사용
    - 정적 라우트 예시: /about, /contact
    - 동적 라우트 예시: /posts/1, /posts/2, /users/username
2. 동적 라우트 설정 방법
    - 동적 라우트를 설정하려면 Route 컴포넌트의 path 속성에 콜론(:)을 사용하여 파라미터를 정의함
    - 형식 :
    ```JS 
	<Route path="/posts/:postId" element={<PostDetail />} />
    ```
3. URL 파라미터 접근 방법
    - 동적 라우트로 설정된 경로에서 컴포넌트는 useParams 훅을 사용하여 URL 파라미터에 접근할 수 있음
    - useParam
        1. React Router에서 제공하는 훅으로, 동적 라우트에서 URL에 포함된 파라미터 값을 가져오는 데 사용함
        2. 이를 통해 URL 경로의 변수 부분을 컴포넌트 내부에서 활용할 수 있음
        3. 예를 들어, URL이 /users/1인 경우 :id에 해당하는 값 1을 가져올 수 있음
        4. 형식 :
            ```JS 
            import { useParams } from 'react-router-dom';
            
            function PostDetail() {
                const { postId } = useParams();
                return( );}
            ```
        <br>->이 훅을 호출하면 URL 파라미터의 키-값 쌍을 가진 객체를 반환함

### 중첩 라우트와 리다이렉션

1. 중첩 라우트
    - 우트 내에 또 다른 라우트를 정의하여 계층 구조를 형성하는 방식임
    - 페이지나 컴포넌트의 중첩된 구조를 반영하고, 하나의 라우트 아래에서 다른 라우트를 렌더링하는 경우에 사용됨
2. 리다이렉션
    - 특정 조건에 따라 사용자를 다른 페이지로 자동 이동시키는 기능임
    - 로그인 후 홈 페이지로 리다이렉트하거나, 사용자가 존재하지 않는 페이지에 접근할 때 404 페이지로 리다이렉트할 수 있음
3. / : root경로

### <Navigate \/> 컴포넌트

1. React Router에서 제공하는 컴포넌트로, 사용자를 특정 경로로 리다이렉트하기 위해 사용됨
2. 이 컴포넌트는 페이지를 새로고침하지 않고도 현재 경로를 변경할 수 있음
3. Navigate 컴포넌트의 주요 기능
    - 즉시 리다이렉션
        1. 사용자가 특정 경로에 접근할 때 즉시 다른 경로로 이동시킬 수 있음
        2. 예를 들어, 인증되지 않은 사용자가 보호된 페이지에 접근하려 할 때 로그인 페이지로 리다이렉트할 수 있음
    - 브라우저 히스토리 관리 : 브라우저의 히스토리에 새 항목을 추가하거나(push), 현재 항목을 교체(replace)하여 브라우저의 뒤로 가기/앞으로 가기 버튼이 예상대로 작동하도록 관리할 수 있음
4. Navigate 컴포넌트의 주요 속성(props)
    - to
        1. 사용자를 이동시키려는 경로를 지정함
        2. 예시 :  to="/login"은 사용자를 /login 경로로 이동시킴
    - replace
        1. 리다이렉션할 때 현재 히스토리 항목을 새 항목으로 대체할지 여부를 결정함
        2. replace={true}로 설정하면 브라우저의 히스토리 스택에서 현재 항목을 새로운 항목으로 교체함
        3. 즉, "뒤로 가기" 버튼을 눌렀을 때 리다이렉트된 경로로 다시 돌아가지 않음
        4. 기본값은 false -> 히스토리 스택에 새로운 항목이 추가됨
5. NotFound 컴포넌트는 사용자가 잘못된 경로에 접근할 때 렌더링되며, 즉시 홈 페이지로 리다이렉트함

### 라우트 보호

1. 특정 조건을 만족하는 사용자만 특정 라우트에 접근할 수 있도록 제한하는 기능임
2. 주로 인증된 사용자만 접근 가능한 페이지를 만들 때 사용함
3. 로그인하지 않은 사용자는 "대시보드" 페이지에 접근할 수 없게 하거나, 관리자 권한이 있는 사용자만 "관리자 페이지"에 접근할 수 있도록 할 수 있음
4. 인증 여부를 확인한 후 접근을 허용하거나 로그인 페이지로 리다이렉트함