# 클래스에서의 타입변환

## 클래스에서의 타입변환

1. 타입 변환은 타입을 다른 타입으로 변환하는 것임
2. 자바에서는 다음과 같이 두 가지의 대표적인 타입 변환이 있음 -> 자료형변환, 클래스의 객체 타입 변환
3. 클래스의 타입 변환도 마찬가지로 자동 형 변환과 강제 형 변환이 있음
4. 단, 자료형에 비해 타입 변환이 가능한 범위가 상당이 좁음
5. 클래스의 타입 변환은, 서로 상속 관계에 있는 클래스 사이에서만 변환할 수 있음

## 클래스의 자동 타입 변환

1. 자료형에서의 자동 형 변환과 마찬가지로 개발자가 직접 명시하지 않아도 자동으로 타입 변환이 일어나는 것을 말함
2. 클래스 자동 타입 변환은 상속 관계에 있는 자식 클래스의 객체를 부모 타입의 객체로 변환하는 것을 말함
```java
부모클래스명 객체명 = new 자식클래스명( );
부모타입 변수명 = new 자식클래스명( );
```
3. 이미 만들어진 자식 객체를 부모 타입으로 변환하려고 할 때는 다음과 같이 구현함
```java
부모 클래스명 객체명 = 자식객체;
부모타입 변수형 = 자식객체 변수명;
```
4. 타입을 변환한다고 객체가 바뀌는게 아니라, 객체는 보존되고 사용만 부모 객체처럼 함
5. 자동 타입 변환은 반드시 자식 클래스의 객체를 부모 타입으로 변환할 때 적용할 수 있음
6. 1차 상속관계가 아니더라도 상위 계층의 타입으로 변환할 수 있음
7. 하지만 같은 상위 계층을 가지고 있더라도, 타입 변환을 시도하려는 두 클래스 간의 상속 관계가 없다면 타입 변환은 불가능함
8. 타입을 부모 타입으로 변환한 객체는, 더 이상 자신의 클래스에 부모 클래스와 별개로 추가한 멤버들을 사용할 수 없음
9. 부모 클래스에 선언된 멤버만 사용할 수 있음
10. 단, 부모 클래스의 메서드를 오버라이딩 한 경우 메서드의 경우에는 자식 객체의 것을 호출할 수 있음

## 자식 객체의 메서드가 호출되는 이유

1. 메서드가 실행 시점에서 성격이 결정되는 동적바인딩 때문임
2. 프로그램의 컴파일 시점에는 실행되는 메서드가 부모클래스의 것인지 자식(하위)클래스의 것인지 알기 어려움
3. 실행 시점에 동적 바인딩이 일어나 부모가 자식 클래스의 멤버함수를 접근하여 실행할 수 있음

## 클래스의 강제타입변환

1. 부모타입으로 변환을 했지만 자식 클래스의 멤버에 접근하고 싶을 때가 있을 수 있음
2. 자바의 규약으로 자식클래스의 멤버에 접근할 수 없으므로 이러한 경우 다시 자식타입으로 변경해서 접근할 수 있도록 해야 함
3. 이것을 클래스의 강제 타입변환이라고 함
4. 자식 객체가 부모 타입으로 자동 타입 변환을 한 후, 다시 자식 타입으로 변환하는 것을 말함
5. 일회성으로 타입 변환이 필요할 때 : 여기서 객체명은 부모타입으로 변환한 자식객체명이 됨
```java
((자식클래스명)객체명).메서드명();
```
6. 자식클래스의 멤버에 접근이 여러번 필요한 경우 : 
```java
객체명(변수명) = (자식클래스명)부모타입(부모타입객체);
```
7. 자식 타입으로 다시 변환을 해줌으로써 부모 타입에서는 사용하지 못했던 자식의 멤버들을 모두 사용할 수 있게 되었음
8. 단, 모든 부모 타입 객체를 자식 타입으로 변환할 수 있는 것은 아님
9. 반드시 부모 타입으로 자동 타입 변환되었던 자식 객체를 다시 자식 타입으로 변환할 때만 강제 타입 변환을 사용할 수 있음

# 동적바인딩(Dynamic Binding)

1. 바인딩 : 메서드 호출을 실제 메서드 몸체와 연결하는 것을 말함
2. 동적바인딩 : JVM이 시행단계에서 객체의 타입을 보고 적절한 메서드를 호출하는 것을 말함

## 동적바인딩의 작동

### 클래스 계층구조

1. 자바에서 동적바인딩은 클래스 계층 구조에서 발생함
2. 상속하거나 인터페이스를 구현함으로써 계층을 가짐
3. 이 계층에서 메서드 오버라이딩이 가능하기 때문임

### 메서드 오버라이딩

1. 자식 클래스는 부모 클래스의 메서드를 재정의(오버라이딩)할 수 있음
2. 이 때, 자식 클래스에서 부모 클래스의 동일한 이름과 시그니처(함수명,매개변수 개수, 매개변수의 자료형)를 가진 메서드를 재정의함

### 실행시 동적 바인딩

1. 객체가 생성되고 메서드가 호출될 때, 실제로 실행될 메서드는 객체의 실제 타입에 따라 결정됨
2. 메서드 호출시 객체의 클래스 타입을 기반으로 어떤 메서드를 호출할지 동적으로 결정됨