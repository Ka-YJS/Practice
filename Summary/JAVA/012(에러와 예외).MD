# 에러(error)와 예외(exception)

1. 자바 프로그램을 실행하다 보면 갑자기 프로그램이 종료되거나, 어떤 원인에 의해 잘못 동작하여 오류 메세지가 나타나는 등 예기치 못한 오류가 발생함
2. 전자는 우리가 해결할 수 없는 시스템에 에러가 발생해 프로그램이 종료된 경우이며, 후자는 프로그램 사용 중 발생한 오류를 개발자가 처리해 메세지가 출력된 경우라고 볼 수 있음


## 에러(error)

1. 에러는 시스템에 비정상적인 상황이 생겼을 때 발생함
2. 외부 요인일 수도 있고, 프로그램 구동 중에 발생하는 치명적인 오류일 수도 있음
3. 이러한 에러들은 개발자가 예측하거나 처리할 수 없는 영역임
4. 종류와 상황
    - OutOfMemoryError : 프로그램 실행 중 메모리 부족
    - IOError : 입출력 에러
    - StackOverFlowError : 가용 메모리 부족 현상, 재귀 호출 문제시 발생


## 예외(exception)

1. 예외란 대체로 프로그램 구동 중에 나타나는 오류들을 말함
2. 문법적으로는 문제가 없어보이지만 실제 운영 중에 생기는 문제들임
3. 예외는 체크 예외(checked exception)와 비체크 예외(uncheked exception)두 가지가 있음
4. 체크 예외
    - 자바 소스를 컴파일 하는 과정에서 검사함
    - 보통 문법적으로 강제하여 예외 처리를 해야 하는 경우
5. 비체크 예외 : 컴파일 과정에서 검사하지 않으므로 사용자의 경험이나 테스트로 찾아야 하는 경우
6. 체크예외와 비체크 예외

|  |체크예외|비체크예외|
|---|---|---|
|처리여부|문법적으로 예외처리를 강제함, 반드시 처리해야함|문법적으로 강제하지않음, 개발자의 판단에 의해 처리|
|확인시점|컴파일단계|실행단계|
|예외클래스|Runtime Exception을 제외한 모든 예외|Runtime Exception의 자식 클래스 모두 포함|
|예외클래스예시|IOException, SQLException등|NullPointerException, IndexOutOfBoundsException, ClassNotFoundException|

7. 예외종류
    - SQLException : SQL시스템상의 에러로 오타, 제약조건불일치, \미사용 등으로 인해 발생함
    - NullPointerException : 참조해야 할 객체가 없어서 발생함
    - IndexOutOfBoundsException : 배열의 길이를 선언 한 것보다 더 많은 값이 들어갔을 때 발생함
    - ClassNotFoundException : 프로그램 실행 중 객체를 생성할 때 클래스를 찾지 못할 때 발생함


### 예외 클래스

1. 자바는 객체 지향언어이므로 프로그램에서 발생하는 예외들은 클래스 형태로 제공됨
2. NullPointerException
    - NullPointerException은 자바 프로그램에서 가장 빈번하게 발생하는 실행 예외
    - 객체가 제대로 생성되지 않은 상태에서 사용할 경우 발생함
    - 우리가 객체를 선언하면 객체는 주소를 가지게 되고, 그것을 통해 객체에 접근해 값을 가져옴
    - 객체는 정의되었는데 실제 메모리에 생성되지 않았을 경우 예외가 발생함
3. NumberForamtException
    - 잘못된 문자열을 숫자로 형 변환할 때 발생함
    - 숫자 형태("111")의 문자열은 정수 타입으로 변환할 수 있으나 문자가 포함되거나, 실수 형태 ("11.11")의 문자열은 변환할 수 없음
    - 정수 형태의 문자열을 정수로 변환하는 방법 : Integer.parseInt("정수형태의 문자열");
4. ArrayIndexOutOfBoundsException : 배열에서 인덱스(index) 범위를 초과해 사용할 때 발생함
5. ArithmeticException : 정수를 0으로 나누려고 할 때 발생함


### 예외 처리 문법

1. 예외처리 과정
    - 코드 진행 중 예외가 발생하면 JVM에게 알림
    - JVM은 발생한 예외를 분석하여 알맞은 예외 클래스를 생성함
    - 생성된 예외 객체를 발생한 지점으로 보냄
    - 예외가 발생한 지점에서 처리하지 않으면 프로그램은 비정상 종료됨
2. try - catch 구문
    - 예외를 처리하는 가장 기본 문법은 try - catch문임
    - 예외가 발생할 가능성이 있는 코드는 try{ }안에 작성함
    - catch 메서드는 시스템으로부터 넘어오는 예외 클래스를 받아서 처리함
3. 형식
```java
try { //예외가 발생할 가능성이 있는 코드//
	} catch (예외 클래스명 e) { //예외처리 코드//
}
```

### 다중 catch 사용하기

1. 프로그램을 구동할 때 하나의 예외만 발생한다면 처리하기는 어렵지 않음
2. 하지만 try 구문 안에서 예외는 다양하게 발생할 수 있음
3. 만약 기존과 같은 방법으로 처리한다면 하나의 예외를 제외하고는 제대로 처리할 수 없음
4. 이때, 다중 catch문을 사용하여 예외별로 예외 처리 코드를 다르게 하여 다양한 예외를 처리할 수 있음


### finally

1. finally블록은 예외 발생 유무와 상관없이 실행되는 구문이며 생략할 수 있음
2. 예외 처리를 할 때, 예외와 상관없이 반드시 처리해야 하는 구문들을 작성할 때 사용됨
3. 보통 외부 연동이나 예외가 발생해도 정상 종료되어야 할 구문들에서 사용함
4. 보통 finally에는 연결을 끊고 닫아야 하는 것들을 정의함
    - 이유 : 예외 발생여부와 상관없이 종료해야 하기 때문 ex. scanner.close( );


### throws(예외 던지기)

1. 메서드 내부에서 예외를 처리하지 않고 미룬 후, 해당 메서드를 호출한 쪽에서 예외를 처리하는 방법을 '예외 던지기'라고 함
2. 때로는 직접 처리하는 것보다 해당 메서드를 사용한 곳에서 처리하도록 하는 것이 효율적일 때가 있음
3. throws
    - 예외 던지기는 throws 키워드를 사용함
    - 메서드 뒤에 throws 키워드를 사용하여 던지기를 할 예외 객체를 붙여주면 됨
    - 예외 객체는 여러 개를 던질 수 있으며, 여러 개를 던질 시에는 콤마(,)로 구분해서 나열해줌

## 강제 예외 처리 방법

1. 프로그램을 작성하다 보면 코드의 오류로 발생하는 예외도 있지만, 프로그램의 규칙에 위배되어 예외를 발생해야 하는 경우도 있음
2. 만약, 프로그램의 규칙에 위배되어 예외를 발생해야 할 경우, 강제로 예외를 발생시킬 수 있음
3. 사용자 정의 예외처리
    - 자바가 제공하는 예외 객체 외에도 개발자의 목적에 의해서 예외 객체를 만들 수 있음
    - 자바가 제공하는 예외 객체는 다양하지만 모든 예외를 처리하기는 어려움
    - 목적에 따라 공통기능을 지니는 예외 처리도 필요하기 때문에 개발자가 직접 예외를 생성하여 처리해야 함